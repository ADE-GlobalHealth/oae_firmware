#include "oae_dac.h"

uint32_t dac_wave_lut[DAC_LUT_SAMPLES] = { 0x07d007d0, 0x09b60a15, 0x0b7f0c27,
		0x0d0f0dda, 0x0e4f0f08, 0x0f2b0f96, 0x0f960f7a, 0x0f8a0eb4, 0x0f080d56,
		0x0e160b7f, 0x0cc50956, 0x0b27070c, 0x095604d3, 0x076e02db, 0x058b0151,
		0x03cc0056, 0x024a0000, 0x011d0056, 0x00560151, 0x000202db, 0x002604d3,
		0x00c0070c, 0x01c60956, 0x03290b7f, 0x04d30d56, 0x06ab0eb4, 0x08940f7a,
		0x0a720f96, 0x0c270f08, 0x0d9a0dda, 0x0eb40c27, 0x0f640a15, 0x0fa007d0,
		0x0f64058b, 0x0eb40379, 0x0d9a01c6, 0x0c270098, 0x0a72000a, 0x08940026,
		0x06ab00ec, 0x04d3024a, 0x03290421, 0x01c6064a, 0x00c00894, 0x00260acd,
		0x00020cc5, 0x00560e4f, 0x011d0f4a, 0x024a0fa0, 0x03cc0f4a, 0x058b0e4f,
		0x076e0cc5, 0x09560acd, 0x0b270894, 0x0cc5064a, 0x0e160421, 0x0f08024a,
		0x0f8a00ec, 0x0f960026, 0x0f2b000a, 0x0e4f0098, 0x0d0f01c6, 0x0b7f0379,
		0x09b6058b, 0x07d007d0, 0x05ea0a15, 0x04210c27, 0x02910dda, 0x01510f08,
		0x00750f96, 0x000a0f7a, 0x00160eb4, 0x00980d56, 0x018a0b7f, 0x02db0956,
		0x0479070c, 0x064a04d3, 0x083202db, 0x0a150151, 0x0bd40056, 0x0d560000,
		0x0e830056, 0x0f4a0151, 0x0f9e02db, 0x0f7a04d3, 0x0ee0070c, 0x0dda0956,
		0x0c770b7f, 0x0acd0d56, 0x08f50eb4, 0x070c0f7a, 0x052e0f96, 0x03790f08,
		0x02060dda, 0x00ec0c27, 0x003c0a15, 0x000007d0, 0x003c058b, 0x00ec0379,
		0x020601c6, 0x03790098, 0x052e000a, 0x070c0026, 0x08f500ec, 0x0acd024a,
		0x0c770421, 0x0dda064a, 0x0ee00894, 0x0f7a0acd, 0x0f9e0cc5, 0x0f4a0e4f,
		0x0e830f4a, 0x0d560fa0, 0x0bd40f4a, 0x0a150e4f, 0x08320cc5, 0x064a0acd,
		0x04790894, 0x02db064a, 0x018a0421, 0x0098024a, 0x001600ec, 0x000a0026,
		0x0075000a, 0x01510098, 0x029101c6, 0x04210379, 0x05ea058b, };

void init_dac(void) {
	HAL_TIM_Base_Start(&htim6);
}

void start_dual_dma_dac_output(void) {
	HAL_DAC_Start_DualDMA(&hdac1, DAC_CHANNEL_12D, (uint32_t*) dac_wave_lut,
	DAC_LUT_SIZE, DAC_ALIGN_12B_R);
}
